<!DOCTYPE html><html lang="en" data-astro-cid-37fxchfa> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Astro v5.12.0"><!-- Favicon --><link rel="icon" type="image/svg+xml" href="/favicon.svg"><!-- Primary Meta Tags --><title>Accept Interfaces, Return Structs | Portfolio</title><meta name="title" content="Accept Interfaces, Return Structs | Portfolio"><meta name="description" content="Diving deep into one of the most important idioms in Golang."><meta name="keywords" content="portfolio, software developer, web development, programming, projects, blog, Golang, Design Patterns, Best Practices, Backend, Code Quality"><meta name="author" content="Portfolio Developer"><meta name="language" content="en"><meta name="theme-color" content="#1a1a1a"><!-- Canonical URL --><link rel="canonical" href="https://portfolio.example.com/blog/accept-interfaces-return-structs/"><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:url" content="https://portfolio.example.com/blog/accept-interfaces-return-structs/"><meta property="og:title" content="Accept Interfaces, Return Structs | Portfolio"><meta property="og:description" content="Diving deep into one of the most important idioms in Golang."><meta property="og:image" content="https://portfolio.example.com/favicon.svg"><meta property="og:image:alt" content="Accept Interfaces, Return Structs | Portfolio - Portfolio"><meta property="og:site_name" content="Portfolio"><meta property="og:locale" content="en_US"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://portfolio.example.com/blog/accept-interfaces-return-structs/"><meta name="twitter:title" content="Accept Interfaces, Return Structs | Portfolio"><meta name="twitter:description" content="Diving deep into one of the most important idioms in Golang."><meta name="twitter:image" content="https://portfolio.example.com/favicon.svg"><meta name="twitter:image:alt" content="Accept Interfaces, Return Structs | Portfolio - Portfolio"><meta name="twitter:creator" content="@portfolio"><meta name="twitter:site" content="@portfolio"><!-- Article specific meta tags --><meta property="article:published_time" content="2024-01-10T00:00:00.000Z"><meta property="article:author" content="Portfolio Developer"><meta property="article:tag" content="Golang"><meta property="article:tag" content="Design Patterns"><meta property="article:tag" content="Best Practices"><meta property="article:tag" content="Backend"><meta property="article:tag" content="Code Quality"><!-- SEO and Indexing --><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><meta name="googlebot" content="index, follow"><!-- Performance and Security --><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="format-detection" content="telephone=no"><meta name="msapplication-TileColor" content="#1a1a1a"><!-- Structured Data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","name":"Accept Interfaces, Return Structs | Portfolio","description":"Diving deep into one of the most important idioms in Golang.","url":"https://portfolio.example.com/blog/accept-interfaces-return-structs/","image":"https://portfolio.example.com/favicon.svg","author":{"@type":"Person","name":"Portfolio Developer"},"datePublished":"2024-01-10T00:00:00.000Z","dateModified":"2024-01-10T00:00:00.000Z"}</script><!-- Preload critical fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><!-- Preload critical resources --><link rel="preload" href="https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiA.woff2" as="font" type="font/woff2" crossorigin><!-- Global Styles --><link rel="stylesheet" href="/src/styles/global.css"><!-- Performance monitoring and accessibility initialization script --><script type="module">if(typeof window<"u"){window.addEventListener("load",function(){const t=performance.now();console.log("Page load time:",t.toFixed(2)+"ms")}),"fonts"in document&&document.fonts.ready.then(function(){console.log("Fonts loaded")});try{"PerformanceObserver"in window&&new PerformanceObserver(e=>{e.getEntries().forEach(i=>{i.entryType==="largest-contentful-paint"&&console.log("LCP:",i.startTime.toFixed(2)+"ms")})}).observe({entryTypes:["largest-contentful-paint"]})}catch{console.warn("Performance monitoring not supported")}CSS.supports("selector(:focus-visible)")||(document.addEventListener("keydown",t=>{t.key==="Tab"&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")})),document.addEventListener("keydown",t=>{t.key==="Escape"&&document.querySelectorAll('[aria-expanded="true"]').forEach(o=>{o instanceof HTMLElement&&o.click()})});let n=window.location.pathname;new MutationObserver(()=>{if(window.location.pathname!==n){n=window.location.pathname;const t=document.title,e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.className="sr-only",e.textContent=`Navigated to ${t}`,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},1e3)}}).observe(document.body,{childList:!0,subtree:!0})}</script><!-- Skip links and accessibility styles --><link rel="stylesheet" href="/assets/css/_slug_-BlIgIWyG.css">
<link rel="stylesheet" href="/assets/css/_slug_-DejjOjQt.css"><script type="module" src="/assets/js/page-DTIbhfSr.js"></script></head> <body data-astro-cid-37fxchfa> <!-- Skip links for accessibility --> <div class="skip-links" data-astro-cid-37fxchfa> <a href="#main-content" class="skip-link" data-astro-cid-37fxchfa>Skip to main content</a> <a href="#navigation" class="skip-link" data-astro-cid-37fxchfa>Skip to navigation</a> <a href="#footer" class="skip-link" data-astro-cid-37fxchfa>Skip to footer</a> </div> <!-- Header with Navigation --> <header role="banner" data-astro-cid-37fxchfa> <div id="navigation" data-astro-cid-37fxchfa> <nav class="navigation" aria-label="Main navigation" data-astro-cid-pux6a34n> <div class="nav-container" data-astro-cid-pux6a34n> <!-- Logo/Brand --> <div class="nav-brand" data-astro-cid-pux6a34n> <a href="/" class="brand-link" aria-label="Go to homepage" data-astro-cid-pux6a34n> <span class="brand-text" data-astro-cid-pux6a34n>Jon Hansen</span> </a> </div> <!-- Desktop Navigation --> <div class="nav-menu" id="nav-menu" data-astro-cid-pux6a34n> <ul class="nav-list" data-astro-cid-pux6a34n> <li class="nav-item" data-astro-cid-pux6a34n> <a href="/" class="nav-link " data-astro-cid-pux6a34n> Home </a> </li><li class="nav-item" data-astro-cid-pux6a34n> <a href="/projects" class="nav-link " data-astro-cid-pux6a34n> My Work </a> </li><li class="nav-item" data-astro-cid-pux6a34n> <a href="/blog" class="nav-link active" aria-current="page" data-astro-cid-pux6a34n> Blog </a> </li><li class="nav-item" data-astro-cid-pux6a34n> <a href="/about" class="nav-link " data-astro-cid-pux6a34n> About </a> </li> </ul> </div> <!-- Mobile Menu Toggle --> <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-menu" data-astro-cid-pux6a34n> <span class="hamburger-line" data-astro-cid-pux6a34n></span> <span class="hamburger-line" data-astro-cid-pux6a34n></span> <span class="hamburger-line" data-astro-cid-pux6a34n></span> </button> </div> </nav>  <script type="module">document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("nav-toggle"),a=document.getElementById("nav-menu");if(t&&a){t.addEventListener("click",()=>{const e=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",(!e).toString()),t.classList.toggle("active"),a.classList.toggle("active")});const s=a.querySelectorAll(".nav-link");s.forEach(e=>{e.addEventListener("click",()=>{t.setAttribute("aria-expanded","false"),t.classList.remove("active"),a.classList.remove("active")})}),document.addEventListener("click",e=>{const c=e.target;!t.contains(c)&&!a.contains(c)&&(t.setAttribute("aria-expanded","false"),t.classList.remove("active"),a.classList.remove("active"))}),t.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.click())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&a.classList.contains("active")&&(t.setAttribute("aria-expanded","false"),t.classList.remove("active"),a.classList.remove("active"),t.focus())});const n=s[0],i=s[s.length-1];a.addEventListener("keydown",e=>{e.key==="Tab"&&a.classList.contains("active")&&(e.shiftKey?document.activeElement===n&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),n.focus()))})}});</script> </div> </header> <!-- Main Content --> <main id="main-content" role="main" data-astro-cid-37fxchfa>  <article class="blog-article" data-astro-cid-4dqtj3le> <!-- Breadcrumb Navigation --> <nav class="breadcrumb-nav" aria-label="Breadcrumb" data-astro-cid-4dqtj3le> <div class="container" data-astro-cid-4dqtj3le> <ol class="breadcrumb-list" data-astro-cid-4dqtj3le> <li class="breadcrumb-item" data-astro-cid-4dqtj3le>  <a href="/" class="breadcrumb-link" data-astro-cid-4dqtj3le> Home </a> <span class="breadcrumb-separator" aria-hidden="true" data-astro-cid-4dqtj3le>/</span>  </li><li class="breadcrumb-item" data-astro-cid-4dqtj3le>  <a href="/blog" class="breadcrumb-link" data-astro-cid-4dqtj3le> Blog </a> <span class="breadcrumb-separator" aria-hidden="true" data-astro-cid-4dqtj3le>/</span>  </li><li class="breadcrumb-item" data-astro-cid-4dqtj3le> <span class="breadcrumb-current" aria-current="page" data-astro-cid-4dqtj3le> Accept Interfaces, Return Structs </span> </li> </ol> </div> </nav> <!-- Article Header --> <header class="article-header" data-astro-cid-4dqtj3le> <div class="container" data-astro-cid-4dqtj3le> <div class="article-meta" data-astro-cid-4dqtj3le> <time class="article-date" datetime="2024-01-10T00:00:00.000Z" data-astro-cid-4dqtj3le> January 9, 2024 </time> <span class="article-reading-time" data-astro-cid-4dqtj3le> 5 min read
</span> <span class="featured-badge" data-astro-cid-4dqtj3le>Featured</span> </div> <h1 class="article-title" data-astro-cid-4dqtj3le>Accept Interfaces, Return Structs</h1> <p class="article-description" data-astro-cid-4dqtj3le>Diving deep into one of the most important idioms in Golang.</p> <div class="article-tags" data-astro-cid-4dqtj3le> <span class="tag-badge" data-astro-cid-4dqtj3le>Golang</span><span class="tag-badge" data-astro-cid-4dqtj3le>Design Patterns</span><span class="tag-badge" data-astro-cid-4dqtj3le>Best Practices</span><span class="tag-badge" data-astro-cid-4dqtj3le>Backend</span><span class="tag-badge" data-astro-cid-4dqtj3le>Code Quality</span> </div> </div> </header> <!-- Article Content --> <div class="article-content" data-astro-cid-4dqtj3le> <div class="container" data-astro-cid-4dqtj3le> <div class="prose" data-astro-cid-4dqtj3le> <h1 id="accept-interfaces-return-structs-a-go-idiom-that-will-change-how-you-think-about-apis">Accept Interfaces, Return Structs: A Go Idiom That Will Change How You Think About APIs</h1>
<p>One of the most powerful and elegant idioms in Go is “accept interfaces, return structs.” If you’re coming from other languages, this might seem counterintuitive at first. After all, many object-oriented languages encourage you to return interfaces to hide implementation details. But Go’s approach is different, and once you understand why, it will fundamentally change how you design APIs.</p>
<h2 id="what-does-accept-interfaces-return-structs-mean">What Does “Accept Interfaces, Return Structs” Mean?</h2>
<p>This idiom suggests that when designing functions and methods:</p>
<ul>
<li><strong>Parameters should be interfaces</strong> (when possible)</li>
<li><strong>Return values should be concrete types</strong> (usually structs)</li>
</ul>
<p>Let’s see this in action with a practical example.</p>
<h2 id="the-traditional-approach-what-not-to-do">The Traditional Approach (What NOT to Do)</h2>
<p>If you’re coming from Java or C#, you might be tempted to write something like this:</p>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go"><span class="token comment">// DON'T DO THIS</span>
<span class="token keyword">type</span> FileProcessor <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">ProcessFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token function">GetResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> CSVProcessor <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    results <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>CSVProcessor<span class="token punctuation">)</span> <span class="token function">ProcessFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token comment">// Process CSV file</span>
    c<span class="token punctuation">.</span>results <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>results<span class="token punctuation">,</span> <span class="token string">"processed "</span><span class="token operator">+</span>filename<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>CSVProcessor<span class="token punctuation">)</span> <span class="token function">GetResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> c<span class="token punctuation">.</span>results
<span class="token punctuation">}</span>

<span class="token comment">// Returning an interface - this is NOT the Go way</span>
<span class="token keyword">func</span> <span class="token function">NewFileProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> FileProcessor <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&#x26;</span>CSVProcessor<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This looks familiar if you’re used to dependency injection frameworks, but it’s not idiomatic Go.</p>
<h2 id="the-go-way-accept-interfaces-return-structs">The Go Way: Accept Interfaces, Return Structs</h2>
<p>Here’s how we’d restructure this following Go idioms:</p>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go"><span class="token comment">// Define interfaces for what we CONSUME</span>
<span class="token keyword">type</span> FileReader <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Read</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Logger <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Log</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Return concrete structs</span>
<span class="token keyword">type</span> CSVProcessor <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    reader FileReader
    logger Logger
    Results <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// Accept interfaces as parameters</span>
<span class="token keyword">func</span> <span class="token function">NewCSVProcessor</span><span class="token punctuation">(</span>reader FileReader<span class="token punctuation">,</span> logger Logger<span class="token punctuation">)</span> <span class="token operator">*</span>CSVProcessor <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&#x26;</span>CSVProcessor<span class="token punctuation">{</span>
        reader<span class="token punctuation">:</span> reader<span class="token punctuation">,</span>
        logger<span class="token punctuation">:</span> logger<span class="token punctuation">,</span>
        Results<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>CSVProcessor<span class="token punctuation">)</span> <span class="token function">ProcessFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>
    
    c<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"Processing file: %s"</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token comment">// Process the CSV data</span>
    c<span class="token punctuation">.</span>Results <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Results<span class="token punctuation">,</span> <span class="token string">"processed "</span><span class="token operator">+</span>filename<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="why-this-works-better">Why This Works Better</h2>
<h3 id="1-flexibility-at-the-boundaries">1. <strong>Flexibility at the Boundaries</strong></h3>
<p>When you accept interfaces, you make your functions incredibly flexible. Look at how easy it is to test our <code>CSVProcessor</code>:</p>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go"><span class="token comment">// Mock implementations for testing</span>
<span class="token keyword">type</span> MockFileReader <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
    err  <span class="token builtin">error</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>MockFileReader<span class="token punctuation">)</span> <span class="token function">Read</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> m<span class="token punctuation">.</span>data<span class="token punctuation">,</span> m<span class="token punctuation">.</span>err
<span class="token punctuation">}</span>

<span class="token keyword">type</span> MockLogger <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    messages <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>MockLogger<span class="token punctuation">)</span> <span class="token function">Log</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span>messages <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>messages<span class="token punctuation">,</span> message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Easy to test!</span>
<span class="token keyword">func</span> <span class="token function">TestCSVProcessor</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mockReader <span class="token operator">:=</span> <span class="token operator">&#x26;</span>MockFileReader<span class="token punctuation">{</span>data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"test,data"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> err<span class="token punctuation">:</span> <span class="token boolean">nil</span><span class="token punctuation">}</span>
    mockLogger <span class="token operator">:=</span> <span class="token operator">&#x26;</span>MockLogger<span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    processor <span class="token operator">:=</span> <span class="token function">NewCSVProcessor</span><span class="token punctuation">(</span>mockReader<span class="token punctuation">,</span> mockLogger<span class="token punctuation">)</span>
    err <span class="token operator">:=</span> processor<span class="token punctuation">.</span><span class="token function">ProcessFile</span><span class="token punctuation">(</span><span class="token string">"test.csv"</span><span class="token punctuation">)</span>
    
    assert<span class="token punctuation">.</span><span class="token function">NoError</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"processed test.csv"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> processor<span class="token punctuation">.</span>Results<span class="token punctuation">)</span>
    assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"Processing file: test.csv"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> mockLogger<span class="token punctuation">.</span>messages<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="2-concrete-types-are-self-documenting">2. <strong>Concrete Types Are Self-Documenting</strong></h3>
<p>When you return a concrete struct, users of your API know exactly what they’re getting:</p>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go">processor <span class="token operator">:=</span> <span class="token function">NewCSVProcessor</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">,</span> logger<span class="token punctuation">)</span>
<span class="token comment">// Users can see all available fields and methods</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>processor<span class="token punctuation">.</span>Results<span class="token punctuation">)</span>  <span class="token comment">// Direct access to results</span>
processor<span class="token punctuation">.</span><span class="token function">ProcessFile</span><span class="token punctuation">(</span><span class="token string">"data.csv"</span><span class="token punctuation">)</span>  <span class="token comment">// Clear method signatures</span>
</code></pre>
<p>Compare this to returning an interface where users have to guess what methods are available or constantly check documentation.</p>
<h3 id="3-easier-api-evolution">3. <strong>Easier API Evolution</strong></h3>
<p>When you return structs, you can add new methods and fields without breaking existing code:</p>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go"><span class="token comment">// Adding new functionality is straightforward</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>CSVProcessor<span class="token punctuation">)</span> <span class="token function">GetProcessedCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">len</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Results<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>CSVProcessor<span class="token punctuation">)</span> <span class="token function">Reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span>Results <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you had returned an interface, adding these methods would require updating the interface definition and potentially breaking existing implementations.</p>
<h2 id="real-world-example-http-client">Real-World Example: HTTP Client</h2>
<p>Here’s how this idiom appears in Go’s standard library and real applications:</p>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go"><span class="token comment">// Accept interfaces for flexible input</span>
<span class="token keyword">type</span> HTTPClient <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Do</span><span class="token punctuation">(</span>req <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>http<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> MetricsCollector <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">RecordRequest</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url <span class="token builtin">string</span><span class="token punctuation">,</span> duration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Return concrete struct</span>
<span class="token keyword">type</span> APIClient <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    client     HTTPClient
    metrics    MetricsCollector
    BaseURL    <span class="token builtin">string</span>
    UserAgent  <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewAPIClient</span><span class="token punctuation">(</span>client HTTPClient<span class="token punctuation">,</span> metrics MetricsCollector<span class="token punctuation">,</span> baseURL <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>APIClient <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&#x26;</span>APIClient<span class="token punctuation">{</span>
        client<span class="token punctuation">:</span>    client<span class="token punctuation">,</span>
        metrics<span class="token punctuation">:</span>   metrics<span class="token punctuation">,</span>
        BaseURL<span class="token punctuation">:</span>   baseURL<span class="token punctuation">,</span>
        UserAgent<span class="token punctuation">:</span> <span class="token string">"MyApp/1.0"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>APIClient<span class="token punctuation">)</span> <span class="token function">GetUser</span><span class="token punctuation">(</span>id <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">.</span>metrics<span class="token punctuation">.</span><span class="token function">RecordRequest</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"/users/"</span><span class="token operator">+</span>id<span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    url <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"%s/users/%s"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>BaseURL<span class="token punctuation">,</span> id<span class="token punctuation">)</span>
    req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
    <span class="token punctuation">}</span>
    
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>UserAgent<span class="token punctuation">)</span>
    
    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> a<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
    <span class="token punctuation">}</span>
    <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">var</span> user User
    <span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token operator">&#x26;</span>user<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="when-to-break-the-rule">When to Break the Rule</h2>
<p>Like all idioms, this one has exceptions:</p>
<h3 id="1-when-you-need-runtime-polymorphism">1. <strong>When You Need Runtime Polymorphism</strong></h3>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go"><span class="token comment">// Sometimes you DO need to return interfaces</span>
<span class="token keyword">func</span> <span class="token function">CreateProcessor</span><span class="token punctuation">(</span>fileType <span class="token builtin">string</span><span class="token punctuation">)</span> FileProcessor <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> fileType <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"csv"</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token operator">&#x26;</span>CSVProcessor<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">"json"</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token operator">&#x26;</span>JSONProcessor<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token operator">&#x26;</span>DefaultProcessor<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="2-when-interface-is-the-core-abstraction">2. <strong>When Interface Is the Core Abstraction</strong></h3>
<pre class="language-go" data-language="go"><code is:raw="" class="language-go"><span class="token comment">// io.Reader is returned because it IS the abstraction</span>
<span class="token keyword">func</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>io<span class="token punctuation">.</span>Reader<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="key-takeaways">Key Takeaways</h2>
<ol>
<li><strong>Accept interfaces</strong> to make your functions flexible and testable</li>
<li><strong>Return structs</strong> to give users concrete, self-documenting types</li>
<li><strong>Define interfaces at the point of use</strong>, not at the point of implementation</li>
<li><strong>Keep interfaces small</strong> - the smaller the interface, the more useful it is</li>
<li><strong>Don’t create interfaces “just in case”</strong> - create them when you need abstraction</li>
</ol>
<h2 id="the-mental-shift">The Mental Shift</h2>
<p>If you’re coming from other languages, this idiom represents a fundamental shift in thinking. Instead of designing inheritance hierarchies and abstract base classes, you’re designing around behavior (interfaces) at consumption points while providing concrete, usable types as outputs.</p>
<p>This approach leads to more composable, testable, and maintainable code. It’s one of the reasons Go codebases tend to be so readable and why the language encourages such clean architectural patterns.</p>
<p>The next time you’re designing an API in Go, remember: be generous with what you accept (interfaces) and specific with what you return (structs). Your future self and your users will thank you.</p> </div> </div> </div> <!-- Article Footer --> <footer class="article-footer" data-astro-cid-4dqtj3le> <div class="container" data-astro-cid-4dqtj3le> <div class="article-actions" data-astro-cid-4dqtj3le> <a href="/blog" class="back-link" data-astro-cid-4dqtj3le>
← Back to Blog
</a> <div class="share-links" data-astro-cid-4dqtj3le> <span class="share-label" data-astro-cid-4dqtj3le>Share:</span> <a href="https://twitter.com/intent/tweet?text=Accept%20Interfaces%2C%20Return%20Structs&url=https%3A%2F%2Fportfolio.example.com%2Fblog%2Faccept-interfaces-return-structs%2F" target="_blank" rel="noopener noreferrer" class="share-link" aria-label="Share on Twitter" data-astro-cid-4dqtj3le>
Twitter
</a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fportfolio.example.com%2Fblog%2Faccept-interfaces-return-structs%2F" target="_blank" rel="noopener noreferrer" class="share-link" aria-label="Share on LinkedIn" data-astro-cid-4dqtj3le>
LinkedIn
</a> </div> </div> </div> </footer> </article>  </main> <!-- Footer --> <footer id="footer" class="site-footer" role="contentinfo" data-astro-cid-37fxchfa> <div class="footer-container" data-astro-cid-37fxchfa> <div class="footer-content" data-astro-cid-37fxchfa> <!-- Footer Brand --> <div class="footer-brand" data-astro-cid-37fxchfa> <h3 class="footer-title" data-astro-cid-37fxchfa>Portfolio</h3> <p class="footer-description" data-astro-cid-37fxchfa>
Jon Hansen is a Full-Stack Software Engineer based in Gilbert, Arizona, with a strong track record of building and maintaining scalable APIs and modern, responsive front-end interfaces. Over four years of professional experience, most recently at NERD Power LLC. Proficient in JavaScript (ES6+), Node.js, React, Next.js, PostgreSQL, AWS, and more.
</p> </div> <!-- Quick Links --> <div class="footer-section" data-astro-cid-37fxchfa> <h4 class="footer-section-title" data-astro-cid-37fxchfa>Quick Links</h4> <ul class="footer-links" data-astro-cid-37fxchfa> <li data-astro-cid-37fxchfa><a href="/" class="footer-link" data-astro-cid-37fxchfa>Home</a></li> <li data-astro-cid-37fxchfa><a href="/projects" class="footer-link" data-astro-cid-37fxchfa>Projects</a></li> <li data-astro-cid-37fxchfa><a href="/blog" class="footer-link" data-astro-cid-37fxchfa>Blog</a></li> <li data-astro-cid-37fxchfa><a href="/about" class="footer-link" data-astro-cid-37fxchfa>About</a></li> </ul> </div> <!-- Social Links --> <div class="footer-section" data-astro-cid-37fxchfa> <h4 class="footer-section-title" data-astro-cid-37fxchfa>Connect</h4> <ul class="footer-social" data-astro-cid-37fxchfa> <li data-astro-cid-37fxchfa> <a href="https://github.com/feline-dis" class="footer-social-link" target="_blank" rel="noopener noreferrer" aria-label="Visit GitHub profile" data-astro-cid-37fxchfa> <span class="social-icon" data-icon="github" data-astro-cid-37fxchfa></span> GitHub </a> </li><li data-astro-cid-37fxchfa> <a href="https://linkedin.com/in/feline-dis" class="footer-social-link" target="_blank" rel="noopener noreferrer" aria-label="Visit LinkedIn profile" data-astro-cid-37fxchfa> <span class="social-icon" data-icon="linkedin" data-astro-cid-37fxchfa></span> LinkedIn </a> </li><li data-astro-cid-37fxchfa> <a href="mailto:jonhansen.dev@gmail.com" class="footer-social-link" target="_blank" rel="noopener noreferrer" aria-label="Visit Email profile" data-astro-cid-37fxchfa> <span class="social-icon" data-icon="email" data-astro-cid-37fxchfa></span> Email </a> </li> </ul> </div> </div> <!-- Footer Bottom --> <div class="footer-bottom" data-astro-cid-37fxchfa> <p class="footer-copyright" data-astro-cid-37fxchfa>
© 2025 Portfolio. Built with
<a href="https://astro.build" target="_blank" rel="noopener noreferrer" class="footer-link" data-astro-cid-37fxchfa>Astro</a>.
</p> </div> </div> </footer> </body></html>  <script type="module">document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".prose pre").forEach((o,r)=>{const s=`code-block-${r}`;o.setAttribute("data-code-id",s);const t=document.createElement("button");t.className="copy-button",t.innerHTML=`
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
          <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
        </svg>
        <span>Copy</span>
      `,t.setAttribute("aria-label","Copy code to clipboard"),t.setAttribute("title","Copy code"),o.appendChild(t),t.addEventListener("click",async function(i){i.preventDefault(),i.stopPropagation();const n=o.querySelector("code");if(!n)return;const c=n.textContent||"";try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(c);else{const e=document.createElement("textarea");e.value=c,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),e.remove()}this.classList.add("copied"),this.innerHTML=`
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20,6 9,17 4,12"/>
            </svg>
            <span>Copied!</span>
          `,setTimeout(()=>{this.classList.remove("copied"),this.innerHTML=`
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
              </svg>
              <span>Copy</span>
            `},2e3)}catch(e){console.error("Failed to copy code:",e),this.innerHTML=`
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="15" y1="9" x2="9" y2="15"/>
              <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
            <span>Failed</span>
          `,setTimeout(()=>{this.innerHTML=`
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
              </svg>
              <span>Copy</span>
            `},2e3)}})})});</script>